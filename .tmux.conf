# ==============================================================================
# General Settings
# ==============================================================================

# Set prefix to Ctrl-a (easier to reach) and keep Ctrl-b
set -g prefix C-a
set -g prefix2 C-b
bind C-a send-prefix

# Set default terminal mode to 256color and enable TrueColor
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",*256col*:Tc"

# Enable mouse support
set -g mouse on

# Start windows and panes at 1, not 0
set -g base-index 1
set -g pane-base-index 1

# Automatically renumber windows when one is closed
set -g renumber-windows on

# Increase history limit
set -g history-limit 100000

# Clipboard integration (OSC 52)
set -g set-clipboard on

# Update environment variables for X11/SSH forwarding
set -g update-environment "DISPLAY SSH_ASKPASS SSH_AGENT_PID SSH_CONNECTION WINDOWID XAUTHORITY"

# ==============================================================================
# Key Bindings
# ==============================================================================

# Reload config file
bind r source-file ~/.tmux.conf \; display "Config Reloaded!"

# Split windows using | and -
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
bind '"' split-window -v -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"
bind c new-window -c "#{pane_current_path}"

# Vim-like pane navigation
unbind C-h
unbind C-j
unbind C-k
unbind C-l
bind -r k select-pane -U
bind -r j select-pane -D
bind -r h select-pane -L
bind -r l select-pane -R

# Vi copy mode
setw -g mode-keys vi
bind-key -T copy-mode-vi v send -X begin-selection
bind-key -T copy-mode-vi y send -X copy-selection

# System clipboard integration (xclip fallback)
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "xclip -selection clipboard -i"
bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "xclip -selection clipboard -i"

# ==============================================================================
# Status Bar Theme
# ==============================================================================

set -g status-interval 1
set -g status-style bg='#0C8A92',fg=black

# Active window title color
set-window-option -g window-status-current-style bg=white,fg=black,bold

# Pane border colors
set -g pane-border-style fg='#0C8A92',bg=black
set -g pane-active-border-style fg=blue,bg=black

# Status Right
set -g status-right "%Y-%m-%d %H:%M:%S "